spring:
  application:
    name: exam-solver-preprocessor

server:
  port: 8082

preprocessor:
  exercise-delimiters:
    es: "=== EJERCICIO ==="
    en: "=== EXERCISE ==="
    de: "=== AUFGABE ==="
    fr: "=== EXERCICE ==="
  noise:
    noise-ratio-threshold: 0.02
    malformed-word-ratio-threshold: 0.25
    malformed-word-min-length: 3
    malformed-char-ratio: 0.4
  cleaning:
    max-line-length: 50
  scientific:
    min-matches: 3
  ocr:
    default-lang: eng
    language-code-map:
      es: spa
      en: eng
      fr: fra
      de: deu
    tessdata-path: /usr/share/tesseract-ocr/5/tessdata

external:
  nougat:
    base-url: http://localhost:8503

resilience4j:
  retry:
    instances:
      nougatServiceRetry:
        max-attempts: 3
        wait-duration: 2s
        retry-exceptions:
          - org.springframework.web.reactive.function.client.WebClientRequestException
          - org.springframework.web.reactive.function.client.WebClientResponseException
        exponential-backoff-multiplier: 2
        max-wait-duration: 10s

logging:
  level:
    com.examsolver: DEBUG
